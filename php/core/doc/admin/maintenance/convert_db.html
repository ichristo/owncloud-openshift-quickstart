
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">


<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    
    <title>Converting Database Type &mdash; ownCloud Administrators Manual 7.0 documentation</title>
    
    <link rel="stylesheet" href="../_static/style.css" type="text/css" />
    <link rel="stylesheet" href="../_static/pygments.css" type="text/css" />
    <link rel="stylesheet" href="../_static/style.css" type="text/css" />
    <link rel="stylesheet" href="../_static/bootstrap-sphinx.css" type="text/css" />
    
    <script type="text/javascript">
      var DOCUMENTATION_OPTIONS = {
        URL_ROOT:    '../',
        VERSION:     '7.0',
        COLLAPSE_INDEX: false,
        FILE_SUFFIX: '.html',
        HAS_SOURCE:  true
      };
    </script>
    <script type="text/javascript" src="../_static/jquery.js"></script>
    <script type="text/javascript" src="../_static/underscore.js"></script>
    <script type="text/javascript" src="../_static/doctools.js"></script>
    <script type="text/javascript" src="../_static/bootstrap.js"></script>
    <link rel="top" title="ownCloud Administrators Manual 7.0 documentation" href="../index.html" />
    <link rel="up" title="Maintenance" href="index.html" />
    <link rel="next" title="Issues" href="../issues/index.html" />
    <link rel="prev" title="Migrating ownCloud Installations" href="migrating.html" />
<script type="text/javascript">
(function () {
  /**
   * Patch TOC list.
   *
   * Will mutate the underlying span to have a correct ul for nav.
   *
   * @param $span: Span containing nested UL's to mutate.
   * @param minLevel: Starting level for nested lists. (1: global, 2: local).
   */
  var patchToc = function ($ul, minLevel) {
    var findA;

    // Find all a "internal" tags, traversing recursively.
    findA = function ($elem, level) {
      var level = level || 0,
        $items = $elem.find("> li > a.internal, > ul, > li > ul");

      // Iterate everything in order.
      $items.each(function (index, item) {
        var $item = $(item),
          tag = item.tagName.toLowerCase(),
          pad = 15 + ((level - minLevel) * 10);

        if (tag === 'a' && level >= minLevel) {
          // Add to existing padding.
          $item.css('padding-left', pad + "px");
          console.log(level, $item, 'padding-left', pad + "px");
        } else if (tag === 'ul') {
          // Recurse.
          findA($item, level + 1);
        }
      });
    };

    console.log("HERE");
    findA($ul);
  };

  $(document).ready(function () {
    // Add styling, structure to TOC's.
    $(".dropdown-menu").each(function () {
      $(this).find("ul").each(function (index, item){
        var $item = $(item);
        $item.addClass('unstyled');
      });
      $(this).find("li").each(function () {
        $(this).parent().append(this);
      });
    });

    // Patch in level.
    patchToc($("ul.globaltoc"), 2);
    patchToc($("ul.localtoc"), 2);

    // Enable dropdown.
    $('.dropdown-toggle').dropdown();
  });
}());
</script>

  </head>
  <body>
  

<div class="container">
  <div class="content">
    <div class="page-header">
      <h1><a href="../contents.html">ownCloud Administrators Manual</a></h1>

    </div>
    
			<div class="row">
				<div class="span3">
					<div class="sidebar">
						<div class="well">
							<div class="menu-support-container">
								<ul id="menu-support" class="menu">
									<ul>
										<li><a href="../contents.html">Overview</a></li>
									</ul>
                  <ul>
<li class="toctree-l1"><a class="reference internal" href="../index.html">Introduction</a></li>
</ul>
<ul class="current">
<li class="toctree-l1"><a class="reference internal" href="../whats_new_admin.html">What&#8217;s New for Admins in ownCloud 7</a></li>
<li class="toctree-l1"><a class="reference internal" href="../installation/index.html">Installation</a></li>
<li class="toctree-l1"><a class="reference internal" href="../configuration/index.html">Configuration</a></li>
<li class="toctree-l1 current"><a class="reference internal" href="index.html">Maintenance</a><ul class="current">
<li class="toctree-l2"><a class="reference internal" href="enable_maintenance.html">Maintenance Mode Configuration</a></li>
<li class="toctree-l2"><a class="reference internal" href="backup.html">Backing up ownCloud</a></li>
<li class="toctree-l2"><a class="reference internal" href="update.html">Updating ownCloud with the Updater App</a></li>
<li class="toctree-l2"><a class="reference internal" href="upgrade.html">Upgrading Your ownCloud Server</a></li>
<li class="toctree-l2"><a class="reference internal" href="restore.html">Restoring ownCloud</a></li>
<li class="toctree-l2"><a class="reference internal" href="migrating.html">Migrating ownCloud Installations</a></li>
<li class="toctree-l2 current"><a class="current reference internal" href="">Converting Database Type</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#run-the-conversion">Run the conversion</a></li>
<li class="toctree-l3"><a class="reference internal" href="#unconvertible-tables">Unconvertible Tables</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../issues/index.html">Issues</a></li>
</ul>

								</ul>
							</div>
						</div>
					</div>
				</div>
        

				<div class="span9">
					<div class="page-content">
						
  <div class="section" id="converting-database-type">
<h1>Converting Database Type<a class="headerlink" href="#converting-database-type" title="Permalink to this headline">¶</a></h1>
<p>You can convert a sqlite database to a more performing MySQL, MariaDB or PostgreSQL database with the ownCloud command line tool.
Available since ownCloud version 7.0.0. To convert former ownCloud installations, first update to at least version 7.0.0.</p>
<div class="section" id="run-the-conversion">
<h2>Run the conversion<a class="headerlink" href="#run-the-conversion" title="Permalink to this headline">¶</a></h2>
<p>First setup the new database, here called &#8220;new_db_name&#8221;.
In ownCloud root folder call</p>
<div class="highlight-bash"><div class="highlight"><pre>php occ db:convert-type <span class="o">[</span>options<span class="o">]</span> <span class="nb">type </span>username hostname database
</pre></div>
</div>
<p>Available values for the <tt class="docutils literal"><span class="pre">type</span></tt> parameter are:</p>
<ul class="simple">
<li>mysql (for MySQL or MariaDB)</li>
<li>oci (for Oracle)</li>
<li>pgsql (for PostgreSQL)</li>
</ul>
<p>The Options</p>
<ul class="simple">
<li><tt class="docutils literal"><span class="pre">--port=&quot;3306&quot;</span></tt>                       the database port (optional)</li>
<li><tt class="docutils literal"><span class="pre">--password=&quot;mysql_user_password&quot;</span></tt>    password for the new database. If omitted the tool will ask you (optional)</li>
<li><tt class="docutils literal"><span class="pre">--clear-schema</span></tt>                      clear schema (optional)</li>
<li><tt class="docutils literal"><span class="pre">--all-apps</span></tt>                          by default, tables for enabled apps are converted, use to convert also tables of deactivated apps (optional)</li>
</ul>
<p><em>Note:</em> The converter searches for apps in your configured app folders and uses the schema definitions in the apps to create the new table. So tables of removed apps will not be converted even with option <tt class="docutils literal"><span class="pre">--all-apps</span></tt></p>
<p>For example</p>
<div class="highlight-bash"><div class="highlight"><pre>php occ db:convert-type --all-apps mysql oc_mysql_user 127.0.0.1 new_db_name
</pre></div>
</div>
<p>To successfully proceed with the conversion, you must type <tt class="docutils literal"><span class="pre">yes</span></tt> when prompted with the question <tt class="docutils literal"><span class="pre">Continue</span> <span class="pre">with</span> <span class="pre">the</span> <span class="pre">conversion?</span></tt></p>
<p>On success the converter will automatically configure the new database in your ownCloud config <tt class="docutils literal"><span class="pre">config.php</span></tt>.</p>
</div>
<div class="section" id="unconvertible-tables">
<h2>Unconvertible Tables<a class="headerlink" href="#unconvertible-tables" title="Permalink to this headline">¶</a></h2>
<p>If you updated your ownCloud installation there might exist old tables, which are not used anymore. The converter will tell you</p>
<div class="highlight-bash"><div class="highlight"><pre>The following tables will not be converted:
oc_permissions
...
</pre></div>
</div>
<p>You can ignore these tables.
Here is a list of known old tables:</p>
<ul class="simple">
<li>oc_calendar_calendars</li>
<li>oc_calendar_objects</li>
<li>oc_calendar_share_calendar</li>
<li>oc_calendar_share_event</li>
<li>oc_fscache</li>
<li>oc_log</li>
<li>oc_media_albums</li>
<li>oc_media_artists</li>
<li>oc_media_sessions</li>
<li>oc_media_songs</li>
<li>oc_media_users</li>
<li>oc_permissions</li>
<li>oc_queuedtasks</li>
<li>oc_sharing</li>
</ul>
</div>
</div>


					</div>
				</div>
			</div>
    
  </div>
</div>
  </body>
</html>